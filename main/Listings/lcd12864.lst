C51 COMPILER V9.54   LCD12864                                                              05/10/2019 14:59:31 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD12864
OBJECT MODULE PLACED IN .\Objects\lcd12864.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\lcd12864\lcd12864.c OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(..\delay;..\
                    -ds18b20;..\lcd12864;..\ds1302) DEBUG PRINT(.\Listings\lcd12864.lst) OBJECT(.\Objects\lcd12864.obj)

line level    source

   1          #include <reg52.h>
   2          #include "lcd12864.h"
   3          #include "delay.h"
   4          
   5          #define LCD12864_DATA P0
   6          
   7          //********************************************************************************************************
             -************************
   8          //申请空间
   9          //********************************************************************************************************
             -************************
  10          uchar code line2[]="    ℃";
  11          
  12          //********************************************************************************************************
             -************************
  13          //IO设置
  14          //********************************************************************************************************
             -************************
  15          sbit LCD12864_RS = P3^5;      //定义lcd数据命令选择端
  16          sbit LCD12864_RW = P3^6;      //定义lcd读写选择端
  17          sbit LCD12864_EN = P3^4;      //定义lcd使能端
  18          sbit LCD12864_PSB = P3^7;      //定义并串选择端
  19          
  20          //********************************************************************************************************
             -************************
  21          //写指令
  22          //********************************************************************************************************
             -************************
  23          void Write_Cmd(uchar cmd)
  24          {
  25   1              LCD12864_RS = 0;
  26   1              LCD12864_RW = 0;        
  27   1              LCD12864_EN = 0;
  28   1              LCD12864_DATA = cmd;
  29   1              delay_ms(1);
  30   1              LCD12864_EN = 1;
  31   1              delay_ms(1);
  32   1              LCD12864_EN = 0; 
  33   1      }
  34          
  35          //********************************************************************************************************
             -***********************
  36          //写数据
  37          //********************************************************************************************************
             -***********************
  38          void Write_Data(uchar dat)
  39          {
  40   1              LCD12864_RS = 1;        
  41   1              LCD12864_EN = 0;
  42   1              LCD12864_RW = 0;        
  43   1              LCD12864_DATA = dat;
  44   1              delay_ms(1);
  45   1              LCD12864_EN = 1;
  46   1              delay_ms(1);
C51 COMPILER V9.54   LCD12864                                                              05/10/2019 14:59:31 PAGE 2   

  47   1              LCD12864_EN = 0; 
  48   1      }
  49          
  50          //********************************************************************************************************
             -**********************
  51          //用户界面数据显示
  52          //********************************************************************************************************
             -**********************
  53          void Show_temp()
  54          {
  55   1              Write_Cmd(0x88);  //显示温度
  56   1              
  57   1              Write_Data(0x30+d2);
  58   1              Write_Data(0x30+d1);
  59   1              Write_Data(0x2e);  //写入“.”号
  60   1              Write_Data(0x30+d0);
  61   1      } 
  62          //********************************************************************************************************
             -**********************
  63          //初始化
  64          //********************************************************************************************************
             -**********************
  65          void LCD12864_Init()
  66          {
  67   1              delay_ms(20);          //等待液晶输入电源稳定
  68   1              
  69   1      //LCD12864_PSB = 1;         //选定lcd与单片机并行连接
  70   1              LCD12864_RW = 0;        //因为我们不需要从lcd模块读数据，所以可直接将此端口清零，便于之后利用矩阵键盘
  71   1              
  72   1              Write_Cmd(0x30);           //选择功能：8位数据基本指令操作
  73   1              Write_Cmd(0x0c);          //整体显示开，不显示光标
  74   1              Write_Cmd(0x01);          //lcd清屏
  75   1              Write_Cmd(0x06);
  76   1              
  77   1      }
  78          //********************************************************************************************************
             -**********************
  79          //写显示行数
  80          //********************************************************************************************************
             -**********************
  81          void Show_data()
  82          {
  83   1              Write_Cmd(0x88);          //设置第二行起始位
  84   1              for(a=0;a<6;a++)             //写入第二行数据
  85   1              {
  86   2                      Write_Data(line2[a]);
  87   2              }
  88   1      
  89   1      }
  90          
  91          void LCD12864_Write_word(uchar *str)
  92          {
  93   1              while(*str != '\0')     
  94   1              {
  95   2                      Write_Data(*str++);   
  96   2              }
  97   1                      *str = 0;
  98   1      }
  99          
 100          
 101          
 102          
C51 COMPILER V9.54   LCD12864                                                              05/10/2019 14:59:31 PAGE 3   

 103          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    206    ----
   CONSTANT SIZE    =      7    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
